---
title:  éƒ½æ˜¯ M1 æƒ¹çš„ç¦ï¼Ÿé€£ Bundler ä¹Ÿé­æ®ƒï¼Ÿï¼
date:   2022-08-23 16:35:00 +0800
image:  '/images/20220823163500/cover.png'
tags:   [æŠ€è¡“ç­†è¨˜, éƒ½æ˜¯M1æƒ¹çš„ç¦ï¼Ÿ, Ruby]
---

## å‰è¨€
å¥½ä¸å®¹æ˜“æå®šäº† Ruby å®‰è£ï¼Œæ¥ä¸‹ä¾†ç•¶ç„¶å°±è¦é–‹å§‹èµ·å°ˆæ¡ˆå•¦ï¼

## éç¨‹

### Mimemagic å®‰è£å¤±æ•—
1. å°ˆæ¡ˆè³‡æ–™å¤¾æ‰“é–‹å¾Œï¼Œèµ·æ‰‹å¼ç•¶ç„¶æ˜¯
```bash
bundle install
```
![](/images/20220823163500/p1.png)\
å—¯ï¼Ÿå“ˆå›‰ï¼Ÿ ç‚ºä»€éº¼åˆé€æˆ‘ç´…å­—å•Šâ€”â€”ï¼ˆå¶å–Šï¼‰

2. é–±è®€äº†ç´…å­—å¾Œï¼Œå…ˆæŒ‰ç…§ç´…å­—å»ºè­°å»è™•ç†
```bash
gem install mimemagic -v '0.3.10' --source 'https://rubygems.org/'
```
![](/images/20220823163500/p2.png)
Rake failed? æ€éº¼åˆå¤±æ•—äº†

2. åªå¥½æŠŠå‰›å‰›å‡ºç¾éçš„ç´…å­—è¤‡è£½å¾Œï¼Œæ‹¿å»è«‹æ•™ Google å¤§ç¥\
å¤§ç¥è¡¨ç¤ºï¼š
```bash
brew install shared-mime-info
```
\
![](/images/20220823163500/p3.png)\
\
åŸ·è¡Œå¾Œï¼Œå¦‚æœæœ‰æˆåŠŸçš„è©±å°±æœƒçœ‹åˆ°é€™æ¨£çš„å•¤é…’è¨Šæ¯
```bash
ğŸº  /opt/homebrew/Cellar/shared-mime-info/2.2: 86 files, 4.6MB
```

### Mysql2 å®‰è£å¤±æ•—
1. å®‰è£å®Œ Mimemagic å¾Œï¼Œå†é‡æ–° bundle ä¸€æ¬¡
![](/images/20220823163500/p4.png)
çœŸæ£’ğŸ™„ åˆéŒ¯äº† å‘µå‘µå‘µ

2. ç¹¼çºŒæ‹¿è‘—ç´…å­—å»æ‹œå¤§ç¥
å¤§ç¥è¡¨ç¤ºï¼šç¢ºèª`mysql`ã€`openssl`ã€`zstd`æ˜¯å¦å®‰è£ï¼Œå†å®‰è£`mysql2`

3. é€é homebrew å®‰è£
å› ç‚ºæˆ‘éœ€è¦å®‰è£ç‰¹å®šç‰ˆæœ¬çš„ mysqlï¼Œæ‰€ä»¥æ˜¯ä½¿ç”¨ä¸‹æ–¹æŒ‡ä»¤
```bash
brew install mysql@5.7 openssl zstd
```

4. ç·Šæ¥è‘—å†å®‰è£`mysql2`
```bash
gem install mysql2 -v '0.5.2' -- --with-mysql-config=$(brew --prefix mysql)@5.7/bin/mysql_config --with-ldflags="-L$(brew --prefix zstd)/lib -L$(brew --prefix openssl)/lib" --with-cppflags=-I$(brew --prefix openssl)/include
```
æŒ‡ä»¤ä¸­çš„`0.5.2`å¯æ›¿æ›æˆéœ€å®‰è£çš„`mysql2`ç‰ˆæœ¬è™Ÿï¼Œå¦å¤–å› ç‚ºæˆ‘å®‰è£çš„`mysql`æ˜¯æœ‰æŒ‡å®š`5.7`é€™å€‹ç‰ˆæœ¬ï¼Œæ‰€ä»¥åœ¨ä¸Šæ–¹æŒ‡ä»¤ä¸­éœ€åŠ å…¥`@5.7`ï¼Œè‹¥ä½ æ²’æœ‰æŒ‡å®šç‰ˆæœ¬çš„è©±ï¼Œå¯ç§»é™¤

5. æœ€å¾Œå†é‡æ–° bundle ä¸€æ¬¡å°±æˆåŠŸå•¦ğŸ‰

## åƒè€ƒè³‡æ–™
1. [Mimemagic Issue #162](https://github.com/mimemagicrb/mimemagic/issues/162 "Mimemagic Issue #162") 
2. [How to install mysql2 gem on m1 Mac](https://gist.github.com/fernandoaleman/385aad12a18fe50cf5fd1e988e76fd63 "How to install mysql2 gem on m1 Mac")